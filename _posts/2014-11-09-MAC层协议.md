---
layout: post
---
#MAC层协议

MAC：Medium Access Control，介质访问控制层，用于在多路访问信道上确定下一个使用者的协议，属于数据链路层的一个子层。

**载波检测(Carrier Sense)**

一个站在使用信道之前，它可以辨别该信道当前是否正在被使用，如果该信道被检测出来是忙的，则没有哪个站会企图使用该信道，如此下去一直到信道空闲为止。

**无载波检测**

在使用信道之前，站无法检测信道。它们只是盲目地开始传输，以后再判断这次传输是否成功。

无线网络不可能有效地使用载波检测功能，因为并不是每一个站都在其他任一个站的无线电波范围内。

##多路访问协议

###ALOHA

**纯ALOHA**

基本思想很简单：当用户有数据要发送的时候就让它们传输。

当然有可能会有冲突，冲突的帧将被破坏。然而由于广播的反馈特性，发送方可以监听信道，如果不能监听信道，就需要用确认帧。如果冲突了，则发送方只要等待一段随机的时间，然后再次发送该帧。

**分槽ALOHA**

将时间分成离散的间隔，每个间隔对应一帧。

这种方法要求用户遵守统一的时槽边界。一种同步时间的方法是，由一个专门的站在每个间隔起始的时候发出一个脉冲信号，就好像一个时钟一样。

###载波检测多路访问协议

载波检测协议（Carrier sense protocol），每个站都监听是否存在载波，并采取相应的动作。

**持续的和非持续的CSMA**

CSMA: Carrier Sense Multiple Access，载波检测多路访问

1-持续CSMA：当一个站要发送数据的时候，它首先监听信道，看当时是否有其他的站正在传输数据，如果信道忙的话，该站会等待直至信道空闲。当该站检测到信道空闲的时候，它就发送一帧数据。如果有冲突发生的话，该站等待一段随机的时间，然后再次检测和发送。

非持续CSMA：当检测到信道当前正在被使用之中，则该站并不持续地对信道进行监听，它会等待一段随机的时间，然后再重复同样的算法。这种算法会导致更好的信道利用率，但是比起1-持续CSMA来，也导致了更长的延迟。

p-持续CSMA，当检测到信道为空时，它按照概率p的可能性发送数据。而且是应用于分槽的信道。

**带冲突检测的CSMA**

CSMA/CD：CSMA with Collision Detection，带冲突检测的CSMA，广泛应用于LAN中的MAC子层。

对于每一个站而言，一旦它检测到有冲突，它就放弃它当前的传送任务，并等待一段随机的时间，然后再重新尝试传送。因此，CSMA/CD模型将由三部分组成：交替出现的竞争和传输周期，以及当所有的站都静止时候的空闲周期。

冲突检测是一个模拟的过程，这意味着，信号编码方案必须允许检测冲突，由于这个原因，通常需要使用特殊的编码方案。

###无冲突协议

假定共有N个站接入到系统中，每个站都有唯一的地址，从0到N-1。

**位图协议**

每个竞争周期正好包含N个时槽，如果0号站有一帧数据要发送，则他在第0个时槽中传送一个“1”位。在这个时槽中，其他的站不允许发送数据。第j号站通过在j号时槽中插入一个“1”位来声明自己有一帧要发送。当所有N个时槽都通过之后，每个站都知道了哪些站希望传送数据。这个时候，它们便按照数字顺序开始传送数据了。

**二进制倒计数协议**

如果一个站想要使用信道，则它以二进制位串的形式广播它的地址，并且从高序的位开始。假定所有的地址都有相同的长度。来自不同站的每个地址中的位被布尔或（OR）在一起。对于一个站而言，如果它看到，在它的地址位中，一个值为0的高序位被改写成1了，则它就放弃。

###有限竞争协议

在低负载的情况下使用竞争的做法，因而延迟较短，但是在负载较高的情况下使用无冲突的技术，从而获得很好的信道效率。

将所有的站划分成组，这些组不必是两两不想交的。只有0号组的成员才允许竞争0号时槽。如果有一个成员竞争成功了，则它获得信道，便可以传送它的帧。

协议的重点在于如何将站分配到各个时槽中。我们需要的是一种可以动态地将所有的站分配到各个时槽的方法：当负载很低的时候，每个时槽中有许多站参与竞争；而当负载很高的时候，每个时槽只有很少的站，甚至只有一个站。

**自适应树搜索协议**

###无线LAN协议

隐藏站问题（hidden station problem）：由于竞争者离得太远而导致一个站无法检测到潜在的介质竞争对手。

暴露站问题（exposed station problem）

所以，问题是在开始一个传输之前，一个站真正希望知道的是在接收方的周围是否有活动情况。

对于一个基于短距离无线电波的系统而言，多个传输过程可以同时发生，只要它们有不同的目标方，并且这些目标方相互之间都在对方的范围之外。

**MACA(Multiple Access with Collision Avoidance)**避免冲突的多路访问

基本思想是：发送方刺激一下接收方，让它输出一个短帧，因此，接收方附近的站可以检测到该帧，从而在接下去的数据帧（较大）传输过程中它们不再发送数据了。

RTS(Request To Send)帧，CTS(Clear to Send)帧

##无线LAN

###802.11 MAC子层协议

802.11两种操作模式：

- DCF(Distributed Coordination Function，分布式协调功能)
- PCF(Point Coordination Function，点协调功能)

当使用DCF的时候，802.11使用了一个称为CSMA/CA(CSMA with Collision Avoidance)的协议。

以MACAW为基础

为了解决噪声信道的问题，802.11允许所传输的帧被分成小的碎片，每个分片有自己的校验和。在使用停-等协议进行传输时，这些分片被单独编号和确认，也就是说，发送方只有在接收到了第k个分片的确认之后才传输第k+1个分片。
